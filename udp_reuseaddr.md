# UDPではSO_REUSEADDRを使わない

## 動機
UDPでSO_REUSEADDRを使うと、データを受信しているのにそのソケットで受信しない場合がある。

## 回答
（その動作を意図していない限りは）UDPでSO_REUSEADDRを使わない。

TCPのサーバ側ではSO_REUSEADDRをよく使うが、UDPでSO_REUSEADDRを使う場合はおそらく期待をしていない動作となる。もしすでに本当にそのポート番号をbind()していたとしても（例えば二重起動をおこなってしまった場合など）、SO_REUSEADDRを使っている場合はbind()に失敗しない。

そうすると同じポート番号に複数のソケットがオープンしていることになる。この場合、データを受信するといずれかのソケットでのみ受信する（私が試したところ、最後にread()/recv()したソケットでのみ受信する）。

同じ状況でTCPでbind()に失敗するのは、LISTEN状態のアドレス・ポート番号が存在する場合はバインドできないとしてあるからである。なお、LISTEN状態のアドレスが0.0.0.0の場合、このポートに対しては他のどのローカルアドレスでもbind()できない。
