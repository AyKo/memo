# ARPING: 指定のIPアドレスと通信可能か確認したい(Ethner)

## 動機
同じネットワークにおいてネットワークがIPアドレスが重複している、
あるいは重複していないはずなのに重複したような不安定な動作をすることがある。

## 回答
```arping -b -I [NIC名] [IPアドレス]``` を用いる。
ARP-Requestを送信し、受信したReplyを表示する。
もし複数のホストから応答がある場合はそれが表示される。

### IPアドレスの重複
もしIPアドレスが重複している場合、表示されたMACアドレスから重複しているホストがある程度推測できる。
MACアドレスの最初の３バイトはベンダーコードといいIEEEで管理されている。

「MACアドレス　ベンダー」で検索すれば、MACアドレスからベンダーコードを得るサイトがいくつか見つかる。

### ルータのProxyARPによる無効なパケット転送
また、ProxyARPが有効になっているルータが接続されている場合、
そのルータはそのIPアドレスを持っていなくてもルーティング可能なIPアドレスであればARP応答をしてしまう。

もしそのIPアドレスのホストが存在する場合、実際のホストとルータの２か所からARP応答を受信してしまう。
ルータからのARP応答を先に受信した場合（ARP応答は通常先勝ち）、ルータ側にパケットを転送してしまう。
ルータが再転送をしなかった場合、パケットは失われる。
我々が用いるCisco・Allied TelesisのルータはディフォルトでProxyARPが有効なので、意図せずこの問題に突き当たることがある。
