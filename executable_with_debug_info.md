# デバッグ情報付きの実行ファイル

## 動機
将来のCoreダンプ解析に備えて、デバッグ情報付きの実行ファイルで動作させたい。
デバッグ情報付きでリリースしても問題ないか。

## 回答
これには反対意見も多いと思うが、最終顧客が不特定多数でなくプログラムがクローズな環境で動作するならば、
私は基本的に問題ないと考える（もちろん客先の要望による）。

それでも気になる場合は、デバッグ情報付きとそれを削除した実行ファイルを生成すれば解決する。
デバッグ情報なしで動作させ、Coreファイルの解析はデバッグ情報付きの実行ファイルでおこなえばよい。
また、デバッグ情報付きの場合はファイルサイズは肥大するのでパフォーマンスに影響を与える場合がある。その場合も上記と同じくデバッグ情報付きとなしの２つの実行ファイルを準備すればよい。

### デバッグ情報付きでビルドのしかた
Makefileを修正し、gcc/g++のコンパイルオプションに「-g3」をつける。

### デバッグ情報付きと削除した実行ファイルの準備のしかた
デバッグ付きの実行ファイルに対し、『strip -d』を実行するとデバッグ情報を削除した実行ファイルが作られる。

### デバッグ付きの場合はパフォーマンスに影響がある？
ほとんどの場合は気にしなくてよい。

が、実行時、実行ファイルを仮想メモリに割り当てるため、ファイルサイズの増加にともなって確保量も増える。
仮想メモリの量が増えると、それに比例して子プロセスの生成に時間がかかることが分かっている
（実験によると、fork()、exec()の両方で時間がかかっていた）。
私が担当したプログラムで、性能が必要かつ子プロセスの生成を繰り返すものがあった。
この場合は、子プロセスの生成速度がダイレクトに性能に影響するため考慮する必要があった。


